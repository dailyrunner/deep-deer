# Deep Deer 파이프라인 프롬프트 최적화

## 1. 사용자 요청 분석 & 의도 파악 프롬프트

```
당신은 기업 데이터 기반 비즈니스 아이디어 발굴 전문가입니다.

사용자 요청: "{user_request}"

다음을 분석해주세요:
1. **비즈니스 도메인**: 어떤 산업/분야인가?
2. **핵심 키워드**: 기술, 서비스, 시장 관련 주요 용어 5개
3. **데이터 요구사항**: 어떤 종류의 내부 데이터가 필요한가?
4. **시장 트렌드 키워드**: 웹 검색용 키워드 3-5개

출력 형식:
- 도메인: [분야]
- 기술키워드: [키워드1, 키워드2, ...]
- 데이터키워드: [DB관련 키워드들]
- 웹검색키워드: [시장트렌드 키워드들]
```

## 2. NLQ(자연어→SQL) 생성 프롬프트

```
당신은 기업 데이터베이스 분석 전문가입니다.

비즈니스 요청: "{user_request}"
핵심 키워드: "{keywords}"
데이터베이스 스키마: "{schema}"

위 요청과 관련된 인사이트를 찾기 위해 SQL 쿼리를 생성해주세요.

고려사항:
1. 매출, 고객, 제품, 지역, 시간 데이터 중심으로 탐색
2. 트렌드, 패턴, 상관관계 분석 가능한 쿼리
3. 비즈니스 아이디어 도출에 유용한 집계/그룹핑
4. 성능을 고려한 효율적인 쿼리 작성

SQL:
```

## 3. 벡터 검색 쿼리 최적화 프롬프트

```
다음 비즈니스 요청에 가장 관련성 높은 사내 문서를 찾기 위한
검색 쿼리를 생성해주세요.

원본 요청: "{user_request}"
비즈니스 도메인: "{domain}"

검색할 문서 유형:
- 기획서, 제안서, 전략문서
- 시장조사 보고서
- 프로젝트 결과 보고서
- 기술 문서

효과적인 검색 쿼리 (한글+영문):
```

## 4. 웹 검색 키워드 추출 프롬프트

```
기업 내부 데이터 기반 비즈니스 아이디어 발굴을 위한
시장 트렌드 검색 키워드를 추출해주세요.

사용자 요청: "{user_request}"
내부 데이터 컨텍스트: "{internal_context}"

다음 관점에서 키워드를 추출하세요:
1. **기술 트렌드**: 관련 신기술, AI, 디지털 트랜스포메이션
2. **시장 동향**: 산업 동향, 경쟁사 분석, 소비자 트렌드
3. **비즈니스 모델**: 새로운 수익 모델, 서비스 모델
4. **규제/정책**: 관련 규제 변화, 정부 정책

키워드 (한글): [키워드1, 키워드2, 키워드3]
키워드 (영문): [keyword1, keyword2, keyword3]
```

## 5. 최종 아이디어 통합 생성 프롬프트

```
당신은 데이터 기반 비즈니스 전략 컨설턴트입니다.
기업의 내부 데이터와 시장 트렌드를 종합하여 실행 가능한 비즈니스 아이디어를 제시해주세요.

## 입력 정보

**사용자 요청**: {user_request}

**내부 DB 데이터 인사이트**:
{sql_insights}

**사내 문서 컨텍스트**:
{document_context}

**시장 트렌드 정보**:
{market_trends}

## 요구사항

다음 구조로 **3개의 구체적인 비즈니스 아이디어**를 제시하세요:

### 💡 아이디어 1: [아이디어명]

**📊 데이터 근거**
- 내부 데이터에서 발견된 패턴/기회
- 시장 트렌드와의 연결점

**🎯 타겟 고객 & 시장**
- 구체적인 타겟 고객군
- 시장 규모 및 성장 가능성

**⚙️ 구현 방안**
- 기술적 접근 방법
- 필요한 리소스 및 인프라
- 단계별 실행 계획 (3단계)

**💰 비즈니스 모델**
- 수익 구조
- 예상 ROI 및 타임라인

**🚧 리스크 & 완화방안**
- 주요 위험 요소 2가지
- 각각의 대응 전략

---

[아이디어 2, 3도 동일한 구조로 반복]

## 📈 종합 우선순위
1. [아이디어명] - 실행 용이성: 높음, 수익성: 중상
2. [아이디어명] - 실행 용이성: 중간, 수익성: 높음
3. [아이디어명] - 실행 용이성: 중간, 수익성: 중간

```

## 6. 프롬프트 체인 최적화 전략

### A. 단계별 컨텍스트 전달
```python
# 1단계 결과를 2단계로 전달
stage1_output = {
    "domain": "핀테크",
    "keywords": ["AI결제", "개인화", "보안"],
    "data_focus": ["거래패턴", "고객세그먼트"]
}

# 2단계에서 활용
nlq_prompt = f"도메인: {stage1_output['domain']}, 키워드: {stage1_output['keywords']}"
```

### B. 컨텍스트 우선순위 설정
```
데이터 신뢰도 순서:
1순위: 내부 DB 데이터 (가장 신뢰성 높음)
2순위: 사내 문서 (검증된 정보)
3순위: 웹 트렌드 (참고용)

아이디어 생성시 1순위 데이터를 핵심 근거로 활용하고,
2-3순위는 보조적 정보로 활용하세요.
```

### C. 출력 품질 개선
```
각 아이디어마다 다음을 포함하세요:
- 구체적인 숫자 (매출 예상, 고객 수 등)
- 실제 기업 사례 참조
- 기술적 실현 가능성 점수 (1-10점)
- 경쟁사 대비 차별화 포인트
```